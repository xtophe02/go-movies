{"ast":null,"code":"var _jsxFileName = \"/home/chrismo/Documents/PROJECTS/go-movies/frontend/src/routes/genre.js\",\n    _s = $RefreshSig$();\n\nimport { Link, useParams, useLocation, useSearchParams } from \"react-router-dom\";\nimport { useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst fetchMoviesByGenreID = async id => {\n  try {\n    const res = await fetch(`http://localhost:4000/v1/movies/${id}`);\n\n    if (!res.ok) {\n      console.log(res);\n      throw new Error(res.statusText);\n    }\n\n    return res.json();\n  } catch (error) {\n    return error.message;\n  }\n};\n\nexport default function Genre() {\n  _s();\n\n  let params = useSearchParams();\n  console.log(params);\n  const [state, setState] = useState({\n    loading: true,\n    movies: [],\n    error: null\n  });\n  useEffect(() => {\n    const fetchData = async () => {\n      const res = await fetchMoviesByGenreID(params.id);\n\n      if (!res.movies) {\n        setState(prev => ({ ...prev,\n          loading: false,\n          error: res\n        }));\n      } else {\n        setState(prev => ({ ...prev,\n          loading: false,\n          movies: res.movies\n        }));\n      }\n    };\n\n    fetchData();\n  }, [params.id]);\n  return state.movies.length > 0 ? /*#__PURE__*/_jsxDEV(\"ul\", {\n    children: state.movies.map(mv => /*#__PURE__*/_jsxDEV(\"li\", {\n      children: /*#__PURE__*/_jsxDEV(Link, {\n        to: `/movies/${mv.id}`,\n        children: mv.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 11\n      }, this)\n    }, mv.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"No movies of this genre\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Genre, \"mFwu/KgibbWLcOqLZQQCOiYvePU=\", false, function () {\n  return [useSearchParams];\n});\n\n_c = Genre;\n\nvar _c;\n\n$RefreshReg$(_c, \"Genre\");","map":{"version":3,"sources":["/home/chrismo/Documents/PROJECTS/go-movies/frontend/src/routes/genre.js"],"names":["Link","useParams","useLocation","useSearchParams","useState","useEffect","fetchMoviesByGenreID","id","res","fetch","ok","console","log","Error","statusText","json","error","message","Genre","params","state","setState","loading","movies","fetchData","prev","length","map","mv","title"],"mappings":";;;AAAA,SACEA,IADF,EAEEC,SAFF,EAGEC,WAHF,EAIEC,eAJF,QAKO,kBALP;AAMA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;;;AAEA,MAAMC,oBAAoB,GAAG,MAAOC,EAAP,IAAc;AACzC,MAAI;AACF,UAAMC,GAAG,GAAG,MAAMC,KAAK,CAAE,mCAAkCF,EAAG,EAAvC,CAAvB;;AACA,QAAI,CAACC,GAAG,CAACE,EAAT,EAAa;AACXC,MAAAA,OAAO,CAACC,GAAR,CAAYJ,GAAZ;AACA,YAAM,IAAIK,KAAJ,CAAUL,GAAG,CAACM,UAAd,CAAN;AACD;;AACD,WAAON,GAAG,CAACO,IAAJ,EAAP;AACD,GAPD,CAOE,OAAOC,KAAP,EAAc;AACd,WAAOA,KAAK,CAACC,OAAb;AACD;AACF,CAXD;;AAYA,eAAe,SAASC,KAAT,GAAiB;AAAA;;AAC9B,MAAIC,MAAM,GAAGhB,eAAe,EAA5B;AAEAQ,EAAAA,OAAO,CAACC,GAAR,CAAYO,MAAZ;AACA,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBjB,QAAQ,CAAC;AACjCkB,IAAAA,OAAO,EAAE,IADwB;AAEjCC,IAAAA,MAAM,EAAE,EAFyB;AAGjCP,IAAAA,KAAK,EAAE;AAH0B,GAAD,CAAlC;AAKAX,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMmB,SAAS,GAAG,YAAY;AAC5B,YAAMhB,GAAG,GAAG,MAAMF,oBAAoB,CAACa,MAAM,CAACZ,EAAR,CAAtC;;AACA,UAAI,CAACC,GAAG,CAACe,MAAT,EAAiB;AACfF,QAAAA,QAAQ,CAAEI,IAAD,KAAW,EAAE,GAAGA,IAAL;AAAWH,UAAAA,OAAO,EAAE,KAApB;AAA2BN,UAAAA,KAAK,EAAER;AAAlC,SAAX,CAAD,CAAR;AACD,OAFD,MAEO;AACLa,QAAAA,QAAQ,CAAEI,IAAD,KAAW,EAAE,GAAGA,IAAL;AAAWH,UAAAA,OAAO,EAAE,KAApB;AAA2BC,UAAAA,MAAM,EAAEf,GAAG,CAACe;AAAvC,SAAX,CAAD,CAAR;AACD;AACF,KAPD;;AAQAC,IAAAA,SAAS;AACV,GAVQ,EAUN,CAACL,MAAM,CAACZ,EAAR,CAVM,CAAT;AAYA,SAAOa,KAAK,CAACG,MAAN,CAAaG,MAAb,GAAsB,CAAtB,gBACL;AAAA,cACGN,KAAK,CAACG,MAAN,CAAaI,GAAb,CAAkBC,EAAD,iBAChB;AAAA,6BACE,QAAC,IAAD;AAAM,QAAA,EAAE,EAAG,WAAUA,EAAE,CAACrB,EAAG,EAA3B;AAAA,kBAA+BqB,EAAE,CAACC;AAAlC;AAAA;AAAA;AAAA;AAAA;AADF,OAASD,EAAE,CAACrB,EAAZ;AAAA;AAAA;AAAA;AAAA,YADD;AADH;AAAA;AAAA;AAAA;AAAA,UADK,gBASL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UATF;AAWD;;GAhCuBW,K;UACTf,e;;;KADSe,K","sourcesContent":["import {\n  Link,\n  useParams,\n  useLocation,\n  useSearchParams,\n} from \"react-router-dom\";\nimport { useState, useEffect } from \"react\";\n\nconst fetchMoviesByGenreID = async (id) => {\n  try {\n    const res = await fetch(`http://localhost:4000/v1/movies/${id}`);\n    if (!res.ok) {\n      console.log(res);\n      throw new Error(res.statusText);\n    }\n    return res.json();\n  } catch (error) {\n    return error.message;\n  }\n};\nexport default function Genre() {\n  let params = useSearchParams();\n\n  console.log(params);\n  const [state, setState] = useState({\n    loading: true,\n    movies: [],\n    error: null,\n  });\n  useEffect(() => {\n    const fetchData = async () => {\n      const res = await fetchMoviesByGenreID(params.id);\n      if (!res.movies) {\n        setState((prev) => ({ ...prev, loading: false, error: res }));\n      } else {\n        setState((prev) => ({ ...prev, loading: false, movies: res.movies }));\n      }\n    };\n    fetchData();\n  }, [params.id]);\n\n  return state.movies.length > 0 ? (\n    <ul>\n      {state.movies.map((mv) => (\n        <li key={mv.id}>\n          <Link to={`/movies/${mv.id}`}>{mv.title}</Link>\n        </li>\n      ))}\n    </ul>\n  ) : (\n    <p>No movies of this genre</p>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}